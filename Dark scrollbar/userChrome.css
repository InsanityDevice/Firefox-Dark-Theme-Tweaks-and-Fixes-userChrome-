/* Url bar and tab focus color */

:root {
  --browser-ui-highlight-color: #E95420;
  --toolbar-field-focus-border-color: var(--browser-ui-highlight-color) !important;
}

#tabbrowser-tabs {
  --tab-loading-fill: var(--browser-ui-highlight-color) !important;
  --tab-line-color: var(--browser-ui-highlight-color) !important;
}

.tab-throbber[progress]:not([selected=true])::before {
  fill: var(--browser-ui-highlight-color) !important;
}

/* Dark context menus */

:root {
  --uc-menu-bkgnd: rgb(74,74,79);
  --uc-menu-color: rgb(249,249,250);
  --uc-menu-dimmed: rgba(249,249,250,0.1);
  --uc-menu-disabled: rgba(249,249,250,0.5);
  --uc-menu-separator: rgba(249,249,250,0.1);
  --uc-menu-border: rgb(39,39,43);
}

menupopup,
menu,
menuitem { 
  -moz-appearance: none !important; 
}

menuitem,
menu { 
  min-height: 1.8em;
}

.bookmark-item,
.menu-iconic,
.menuitem-iconic {
  max-height: 24px !important;
  line-height: 16px !important;
  border: none !important;
}

.menu-accel, .menu-iconic-accel, .menu-text, .menu-iconic-text {
  padding-top: 0 !important;
  padding-bottom: 0 !important;
}

#context-navigation .menuitem-iconic {
  max-height: none !important;
}

menupopup:not(.PanelUI-subView),
#main-menubar > menu > menupopup,
#context-navigation {
  color: var(--uc-menu-color) !important;
  background: var(--uc-menu-bkgnd) !important;
  border-color: var(--uc-menu-border) !important;
}

.menu-iconic-left, .menu-iconic-text {
  color: var(--uc-menu-color) !important;
}

menu:hover:not(.panel-subview-footer),
menu[_moz-menuactive]:not(.panel-subview-footer),
menu[open]:not(.panel-subview-footer),
menuitem:hover:not(.panel-subview-footer),
menuitem[_moz-menuactive]:not(.panel-subview-footer) { 
  background-color: var(--uc-menu-dimmed) !important;
  color: inherit !important; 
}

menu:not(.subviewbutton) > .menu-right { 
  filter: invert(1);
}

menu:not(.subviewbutton)[disabled="true"] > .menu-right {
  filter: none;
  color: var(--uc-menu-disabled) !important;
}

.menu-iconic-left[disabled="true"], 
.menu-iconic-text[disabled="true"], 
.bookmark-item[disabled="true"],
.menu-iconic[disabled="true"],
.menuitem-iconic[disabled="true"],
menu[disabled="true"],
menuitem[disabled="true"],
.menu-iconic-left[disabled="true"][_moz-menuactive], 
.menu-iconic-text[disabled="true"][_moz-menuactive], 
.bookmark-item[disabled="true"][_moz-menuactive],
.menu-iconic[disabled="true"][_moz-menuactive],
.menuitem-iconic[disabled="true"][_moz-menuactive],
menu[disabled="true"][_moz-menuactive],
menuitem[disabled="true"][_moz-menuactive] {
  color: var(--uc-menu-disabled) !important;
}

menupopup:not(.PanelUI-subView) {
  padding: 4px 0px !important;
}

menupopup menuitem:not(.subviewbutton), menupopup menu:not(.subviewbutton), 
#contentAreaContextMenu menuitem, #contentAreaContextMenu menu {
  padding: 4px 8px !important;
}

#context-navigation {
  padding: 0px !important;
}

#BMB_bookmarksPopup menupopup[placespopup="true"]{
  background: transparent !important;
}

menuseparator:not(.PanelUI-subView) {
  -moz-appearance: none !important;
  margin: 4px 10px !important;
  height: 1px !important;
  border: none !important;
  background: var(--uc-menu-separator) !important;
  padding: 0 !important
}

treechildren::-moz-tree-separator {
  border-color: var(--uc-menu-separator) !important;
  border-bottom: none !important;
}

.PanelUI-subView menuseparator, #context-sep-navigation {
  margin-left: 0 !important;
  margin-right: 0 !important;
}

.PanelUI-subView menuseparator.small-separator {
  margin-left: 10px !important;
  margin-right: 10px !important;
}

.panel-subview-body {
    padding: 4px 0 !important;
}

#widget-overflow-mainView > .panel-subview-body > toolbarseparator, 
.PanelUI-subView menuseparator, 
.PanelUI-subView toolbarseparator, 
.cui-widget-panelview menuseparator, 
.cui-widget-panel toolbarseparator {
    margin: 4px 0 !important;
}

.PanelUI-subView toolbarseparator[orient="vertical"] {
    margin-inline-start: 6px !important;
    margin-inline-end: 7px !important;
    margin-top: 0px !important;
    margin-bottom: 0px !important;
}

toolbaritem#appMenu-fxa-container.toolbaritem-combined-buttons {
    margin-inline-end: 0px !important;
}

.customization-uidensity-menuitem {
    max-height: none !important;
}

toolbarbutton.subviewbutton.highlight.subviewbutton-iconic.bookmark-item {
  padding-top: 0 !important;
  padding-bottom: 0 !important;
}

/*Bookmark bar spacing*/
  toolbarbutton.bookmark-item:not(.subviewbutton) {
    margin: 0 1px !important;
    padding: 5px !important;
  }
  :root[uidensity=compact] toolbarbutton.bookmark-item:not(.subviewbutton) {
    margin: 0 1px !important;
    padding: 1px 4px !important;
  }
  :root[uidensity=touch] toolbarbutton.bookmark-item:not(.subviewbutton) {
    padding: 8px !important;
  }
  /*Separator margins*/
  #PlacesToolbarItems toolbarseparator {
    margin: 0 4px !important;
  }
  /*Bottom margin*/
  #PersonalToolbar {
    padding: 0 6px 3px !important;
  }
  :root[uidensity=compact] #PersonalToolbar {
    padding: 0 6px 2px !important;
  }

/* Darker url bar */

#urlbar:-moz-lwtheme, #navigator-toolbox .searchbar-textbox:-moz-lwtheme {
    background-color: rgb(37,37,39) !important;
}

/* Toolbar button border radius */

:root {
--toolbarbutton-border-radius: 6px !important; /* Hides part of the icon over 8px. */
}

.close-icon {
  border-radius: 6px !important; /* Cannot go under 2px. Reason: SVG fill, not bg color. */
}
  
/* Theme-matching bookmark bar separators */

  #PlacesToolbarItems toolbarseparator {
    -moz-appearance: none !important;
    border-image-slice: 1 !important;
    border-inline-start-style: solid !important;
    border-inline-start-width: 1px !important;
  }
  /* Light */
  #PlacesToolbarItems toolbarseparator:-moz-lwtheme-darktext {
    border-image-source: linear-gradient(rgba(0, 0, 0, 0) 4px, rgba(0, 0, 0, 0.1) 4px, 
        rgba(0, 0, 0, 0.1) calc(-4px + 100%), rgba(0, 0, 0, 0) calc(-4px + 100%)) !important;
    border-inline-start-color: rgb(24, 25, 26) !important;
  }
  /* Dark */
  #PlacesToolbarItems toolbarseparator:-moz-lwtheme-brighttext {
    border-image-source: linear-gradient(rgba(0, 0, 0, 0) 4px, rgba(255, 255, 255, 0.2) 4px, 
        rgba(255, 255, 255, 0.2) calc(-4px + 100%), rgba(0, 0, 0, 0) calc(-4px + 100%)) !important;
    border-inline-start-color: rgb(249, 249, 250) !important;
  }

/* Insert custom scrollbar */

#alltabs-button {
  -moz-binding: url(data:text/xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CjwhLS0gQ29weXJpZ2h0IChjKSAyMDE3IEhhZ2dhaSBOdWNoaQpBdmFpbGFibGUgZm9yIHVzZSB1bmRlciB0aGUgTUlUIExpY2Vuc2U6Cmh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUCiAtLT4KCjwhLS0gUnVuIHVzZXJDaHJvbWUuanMvdXNlckNocm9tZS54dWwgYW5kIC51Yy5qcy8udWMueHVsLy5jc3MgZmlsZXMgIC0tPgo8YmluZGluZ3MgeG1sbnM9Imh0dHA6Ly93d3cubW96aWxsYS5vcmcveGJsIj4KICAgIDxiaW5kaW5nIGlkPSJqcyI+CiAgICAgICAgPGltcGxlbWVudGF0aW9uPgogICAgICAgICAgICA8Y29uc3RydWN0b3I+PCFbQ0RBVEFbCiAgICAgICAgICAgICAgICBpZih3aW5kb3cudXNlckNocm9tZUpzTW9kKSByZXR1cm47CiAgICAgICAgICAgICAgICB3aW5kb3cudXNlckNocm9tZUpzTW9kID0gdHJ1ZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGNocm9tZUZpbGVzID0gRmlsZVV0aWxzLmdldERpcigiVUNocm0iLCBbXSkuZGlyZWN0b3J5RW50cmllczsKICAgICAgICAgICAgICAgIHZhciB4dWxGaWxlcyA9IFtdOwogICAgICAgICAgICAgICAgdmFyIHNzcyA9IENjWydAbW96aWxsYS5vcmcvY29udGVudC9zdHlsZS1zaGVldC1zZXJ2aWNlOzEnXS5nZXRTZXJ2aWNlKENpLm5zSVN0eWxlU2hlZXRTZXJ2aWNlKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgd2hpbGUoY2hyb21lRmlsZXMuaGFzTW9yZUVsZW1lbnRzKCkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZSA9IGNocm9tZUZpbGVzLmdldE5leHQoKS5RdWVyeUludGVyZmFjZShDaS5uc0lGaWxlKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZVVSSSA9IFNlcnZpY2VzLmlvLm5ld0ZpbGVVUkkoZmlsZSk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYoZmlsZS5pc0ZpbGUoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZigvKF51c2VyQ2hyb21lfFwudWMpXC5qcyQvaS50ZXN0KGZpbGUubGVhZk5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlcy5zY3JpcHRsb2FkZXIubG9hZFN1YlNjcmlwdFdpdGhPcHRpb25zKGZpbGVVUkkuc3BlYywge3RhcmdldDogd2luZG93LCBpZ25vcmVDYWNoZTogdHJ1ZX0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoLyhedXNlckNocm9tZXxcLnVjKVwueHVsJC9pLnRlc3QoZmlsZS5sZWFmTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHh1bEZpbGVzLnB1c2goZmlsZVVSSS5zcGVjKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKC9cLmFzXC5jc3MkL2kudGVzdChmaWxlLmxlYWZOYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXNzcy5zaGVldFJlZ2lzdGVyZWQoZmlsZVVSSSwgc3NzLkFHRU5UX1NIRUVUKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzc3MubG9hZEFuZFJlZ2lzdGVyU2hlZXQoZmlsZVVSSSwgc3NzLkFHRU5UX1NIRUVUKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKC9eKD8hKHVzZXJDaHJvbWV8dXNlckNvbnRlbnQpXC5jc3MkKS4rXC5jc3MkL2kudGVzdChmaWxlLmxlYWZOYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXNzcy5zaGVldFJlZ2lzdGVyZWQoZmlsZVVSSSwgc3NzLlVTRVJfU0hFRVQpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNzcy5sb2FkQW5kUmVnaXN0ZXJTaGVldChmaWxlVVJJLCBzc3MuVVNFUl9TSEVFVCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gbG9hZFhVTCgpIHsKICAgICAgICAgICAgICAgICAgICBpZih4dWxGaWxlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmxvYWRPdmVybGF5KHh1bEZpbGVzLnNoaWZ0KCksIG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGxvYWRYVUwsIDUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgICBdXT48L2NvbnN0cnVjdG9yPgogICAgICAgIDwvaW1wbGVtZW50YXRpb24+CiAgICA8L2JpbmRpbmc+CjwvYmluZGluZ3M+);
}

